<!DOCTYPE html>
<html>
<head><title>EMERGENCY TEST</title></head>
<body style="margin: 50px; font-family: monospace;">
  <h1>TESTING PRODUCTION</h1>
  <div id="test-results"></div>
  <script>
    const results = document.getElementById('test-results');

    async function test() {
      results.innerHTML += '<p>✅ JavaScript is running</p>';

      try {
        // Test 1: Fetch homepage HTML
        const htmlRes = await fetch('https://rewriteme.app');
        const html = await htmlRes.text();

        if (html.includes('<div id="root">')) {
          results.innerHTML += '<p>✅ HTML has root div</p>';
        } else {
          results.innerHTML += '<p>❌ HTML missing root div!</p>';
        }

        if (html.includes('index-9PrhMBme.js')) {
          results.innerHTML += '<p>✅ HTML references JS bundle</p>';
        } else {
          results.innerHTML += '<p>❌ HTML missing JS bundle reference!</p>';
        }

        // Test 2: Fetch main JS
        const jsRes = await fetch('https://rewriteme.app/assets/index-9PrhMBme.js');
        const jsText = await jsRes.text();

        if (jsRes.headers.get('content-type').includes('javascript')) {
          results.innerHTML += '<p>✅ JS bundle serves with correct content-type</p>';
        } else {
          results.innerHTML += '<p>❌ JS bundle has wrong content-type: ' + jsRes.headers.get('content-type') + '</p>';
        }

        if (jsText.length > 100000) {
          results.innerHTML += '<p>✅ JS bundle size looks correct (' + (jsText.length / 1024).toFixed(0) + 'KB)</p>';
        } else {
          results.innerHTML += '<p>❌ JS bundle too small: ' + jsText.length + ' bytes</p>';
        }

        if (jsText.includes('ErrorBoundary')) {
          results.innerHTML += '<p>✅ ErrorBoundary found in bundle</p>';
        } else {
          results.innerHTML += '<p>❌ ErrorBoundary NOT found in bundle!</p>';
        }

        // Test 3: Fetch CSS
        const cssRes = await fetch('https://rewriteme.app/assets/index-CNtZ7Wba.css');
        const cssText = await cssRes.text();

        if (cssRes.headers.get('content-type').includes('css')) {
          results.innerHTML += '<p>✅ CSS serves with correct content-type</p>';
        } else {
          results.innerHTML += '<p>❌ CSS has wrong content-type!</p>';
        }

        // Test 4: Check for errors in console when loading the page
        results.innerHTML += '<hr><h2>Now open DevTools Console and look for errors when you visit the real site</h2>';
        results.innerHTML += '<p><a href="https://rewriteme.app" target="_blank" style="font-size: 20px; color: blue;">CLICK HERE TO TEST REAL SITE</a></p>';

      } catch (error) {
        results.innerHTML += '<p style="color: red;">❌ ERROR: ' + error.message + '</p>';
      }
    }

    test();
  </script>
</body>
</html>
